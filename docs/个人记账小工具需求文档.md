# 个人记账小工具需求文档

> **项目名称：** 个人家庭记账小工具  
> **版本：** V1.0  
> **创建日期：** 2025-12-14  
> **项目框架：** RuoYi-Magic (Spring Boot 3.3.6 + MyBatis-Flex + Vue3)

---

## 一、项目概述

### 1.1 项目背景
基于现有的RuoYi-Magic管理系统，为您和您老婆开发一个简洁、实用的个人家庭记账小工具。

### 1.2 项目目标
- **记录管理：** 记录日常收支，掌握家庭财务状况
- **分类统计：** 多维度分析收支数据，了解消费习惯
- **预算控制：** 设置月度预算，实时提醒超支情况
- **共享协作：** 支持夫妻双方共同记账，数据实时同步

### 1.3 技术架构
- **后端：** 基于现有RuoYi-Magic系统（Spring Boot 3.3.6 + MyBatis-Flex + Sa-Token）
- **前端APP：** uniapp + Vue3（一次开发，多端发布：微信小程序、H5、APP）
- **管理后台：** 复用现有RuoYi-Magic管理后台（Vue + Element Plus）
- **数据库：** MySQL 8.0+（复用现有sys_user表）
- **缓存：** Redis 6.0+

**uniapp优势：**
- ✅ 一次开发，多端发布（微信小程序、支付宝小程序、H5、iOS、Android）
- ✅ 基于Vue3，与后台技术栈统一
- ✅ 丰富的组件生态（uView UI）
- ✅ 完善的开发工具（HBuilderX）
- ✅ 成熟的社区支持

---

## 二、功能需求

### 2.1 核心功能模块

#### 2.1.1 【用户管理模块】
**功能描述：** 管理记账用户，支持家庭成员账号

**功能点：**
1. **用户注册/登录**
   - 手机号注册/登录
   - 微信/支付宝授权登录（可选）
   - 记住密码功能

2. **家庭组管理**
   - 创建家庭组（默认创建者为管理员）
   - 邀请家庭成员加入（生成邀请码）
   - 成员权限管理（查看/记账/管理）
   - 退出家庭组

3. **个人信息管理**
   - 修改昵称、头像
   - 修改密码
   - 绑定/解绑第三方账号

---

#### 2.1.2 【记账模块】
**功能描述：** 快速记录收支，支持多维度分类

**功能点：**
1. **快速记账**
   - 支出记录（金额、分类、日期、备注、支付方式）
   - 收入记录（金额、分类、日期、备注、来源）
   - 支持拍照上传凭证（小票、发票）
   - 支持语音输入备注（可选）

2. **账单分类**
   - **支出分类：**
     - 🍔 餐饮：早餐、午餐、晚餐、夜宵、零食饮料
     - 🛍️ 购物：服饰、日用品、化妆品、数码产品、其他
     - 🏠 居住：房租/房贷、物业费、水电费、燃气费、网费、维修
     - 🚗 交通：公交地铁、打车、加油、停车费、保养维修
     - 🎭 娱乐：电影、旅游、运动健身、游戏、社交
     - 💊 医疗：挂号、药品、检查、住院、保健
     - 📚 教育：书籍、培训、考试、学费
     - 👨‍👩‍👧 家庭：孝敬父母、儿童、宠物
     - 💰 金融：还款、投资、保险、手续费
     - 🎁 人情：红包、礼物、请客
     - 📱 通讯：话费、宽带、会员订阅
     - 🔧 其他：未分类

   - **收入分类：**
     - 💼 工资：基本工资、奖金、提成
     - 💰 投资：股票、基金、理财收益
     - 🎁 红包：节日红包、生日红包
     - 📈 兼职：外快、副业
     - 🔄 报销：公司报销、医保报销
     - 🔧 其他：未分类

3. **账单详情**
   - 查看账单详细信息
   - 编辑账单
   - 删除账单
   - 账单图片查看

4. **支付方式/账户管理**
   - 现金
   - 微信
   - 支付宝
   - 银行卡（可添加多张，显示后四位）
   - 信用卡（可添加多张，显示后四位）
   - 其他

---

#### 2.1.3 【统计分析模块】
**功能描述：** 多维度统计分析，了解收支情况

**功能点：**
1. **首页概览**
   - 今日收支
   - 本周收支
   - 本月收支
   - 本年收支
   - 总资产（可选显示/隐藏）

2. **收支趋势**
   - 按日/周/月/年统计
   - 收支折线图
   - 收支对比柱状图

3. **分类统计**
   - 支出分类饼图
   - 收入分类饼图
   - 分类排行榜（TOP10）
   - 支持按时间范围筛选

4. **账户统计**
   - 各支付方式使用频率
   - 各账户余额变动

5. **成员统计**
   - 家庭成员支出排行
   - 成员消费习惯分析

---

#### 2.1.4 【预算管理模块】
**功能描述：** 设置预算，控制支出

**功能点：**
1. **预算设置**
   - 月度总预算
   - 分类预算（餐饮、购物、娱乐等）
   - 预算周期设置（月度/年度）

2. **预算提醒**
   - 预算达到80%提醒
   - 预算超支提醒
   - 预算剩余提醒

3. **预算分析**
   - 预算执行进度
   - 预算超支分析
   - 预算节省建议（AI智能分析，可选）

---

#### 2.1.5 【账单查询模块】
**功能描述：** 快速查询历史账单

**功能点：**
1. **多条件筛选**
   - 按日期范围
   - 按收支类型
   - 按分类
   - 按成员
   - 按支付方式
   - 按金额区间
   - 按备注关键词

2. **账单列表**
   - 时间倒序展示
   - 支持分页加载
   - 下拉刷新
   - 上拉加载更多

3. **导出功能**
   - 导出Excel报表
   - 导出PDF报表
   - 分享账单

---

#### 2.1.6 【资产管理模块】（可选）
**功能描述：** 管理家庭资产，了解财务状况

**功能点：**
1. **资产账户**
   - 现金账户
   - 银行卡账户
   - 微信/支付宝余额
   - 信用卡额度
   - 投资账户

2. **负债管理**
   - 信用卡欠款
   - 房贷/车贷
   - 借款/欠款

3. **资产总览**
   - 总资产
   - 总负债
   - 净资产

---

#### 2.1.7 【提醒设置模块】
**功能描述：** 智能提醒，养成记账习惯

**功能点：**
1. **记账提醒**
   - 每日记账提醒（可设置时间）
   - 连续未记账提醒

2. **账单提醒**
   - 信用卡还款日提醒
   - 房租/房贷还款提醒
   - 定期支出提醒（如话费、保险等）

3. **预算提醒**
   - 预算超支提醒
   - 预算剩余提醒

---

### 2.2 管理后台功能

#### 2.2.1 【用户管理】
- 查看所有用户
- 用户账号启用/禁用
- 重置用户密码
- 用户登录日志

#### 2.2.2 【账单管理】
- 查看所有账单记录
- 账单审核（可选）
- 账单删除/恢复
- 数据导出

#### 2.2.3 【分类管理】
- 自定义收支分类
- 分类排序
- 分类图标设置
- 启用/禁用分类

#### 2.2.4 【数据统计】
- 用户活跃度分析
- 记账数据统计
- 系统使用情况

#### 2.2.5 【系统配置】
- 基础配置
- 第三方登录配置（微信、支付宝）
- 消息推送配置
- 数据备份/恢复

---

## 三、数据库设计

### 3.1 核心数据表

#### 3.1.1 用户表（复用现有sys_user表）
**说明：** 复用现有的`sys_user`表，无需新建用户表，利用系统已有的用户管理能力。

**现有sys_user表结构：**
```sql
-- 已存在的用户表，包含以下核心字段
sys_user (
  user_id bigint PRIMARY KEY,
  user_name varchar(30),      -- 用户账号
  nick_name varchar(30),       -- 用户昵称
  phonenumber varchar(11),     -- 手机号
  password varchar(100),       -- 密码
  avatar varchar(255),         -- 头像
  sex char(1),                 -- 性别
  status char(1),              -- 状态
  del_flag char(1),            -- 删除标志
  login_date datetime,         -- 最后登录时间
  create_time datetime,        -- 创建时间
  update_time datetime         -- 更新时间
)
```

#### 3.1.2 用户扩展表 (bill_user_profile)
**说明：** 存储记账相关的扩展信息，与sys_user表关联

```sql
CREATE TABLE `bill_user_profile` (
  `profile_id` bigint NOT NULL AUTO_INCREMENT COMMENT '扩展ID',
  `user_id` bigint NOT NULL COMMENT '用户ID（关联sys_user.user_id）',
  `family_id` bigint COMMENT '家庭组ID',
  `family_role` char(1) DEFAULT '1' COMMENT '家庭角色（1普通成员 2管理员）',
  `wechat_openid` varchar(100) COMMENT '微信openid',
  `alipay_user_id` varchar(100) COMMENT '支付宝用户ID',
  `default_account_id` bigint COMMENT '默认账户ID',
  `budget_alert_enabled` char(1) DEFAULT '1' COMMENT '预算提醒开关（0关闭 1开启）',
  `daily_remind_enabled` char(1) DEFAULT '1' COMMENT '每日记账提醒开关',
  `daily_remind_time` time DEFAULT '21:00:00' COMMENT '每日提醒时间',
  `create_time` datetime COMMENT '创建时间',
  `update_time` datetime COMMENT '更新时间',
  `del_flag` char(1) DEFAULT '0' COMMENT '删除标志',
  PRIMARY KEY (`profile_id`),
  UNIQUE KEY `uk_user_id` (`user_id`),
  KEY `idx_family_id` (`family_id`)
) COMMENT='记账用户扩展表';
```

#### 3.1.3 家庭组表 (bill_family)
```sql
CREATE TABLE `bill_family` (
  `family_id` bigint NOT NULL AUTO_INCREMENT COMMENT '家庭组ID',
  `family_name` varchar(50) COMMENT '家庭组名称',
  `family_code` varchar(20) COMMENT '家庭组邀请码',
  `creator_id` bigint COMMENT '创建者ID',
  `member_count` int DEFAULT 0 COMMENT '成员数量',
  `status` char(1) DEFAULT '0' COMMENT '状态（0正常 1停用）',
  `create_time` datetime COMMENT '创建时间',
  `update_time` datetime COMMENT '更新时间',
  `del_flag` char(1) DEFAULT '0' COMMENT '删除标志',
  PRIMARY KEY (`family_id`),
  UNIQUE KEY `uk_family_code` (`family_code`)
) COMMENT='家庭组表';
```

#### 3.1.4 账单表 (bill_record)
```sql
CREATE TABLE `bill_record` (
  `record_id` bigint NOT NULL AUTO_INCREMENT COMMENT '账单ID',
  `user_id` bigint NOT NULL COMMENT '记账人ID',
  `family_id` bigint NOT NULL COMMENT '家庭组ID',
  `record_type` char(1) NOT NULL COMMENT '类型（0支出 1收入）',
  `amount` decimal(10,2) NOT NULL COMMENT '金额',
  `category_id` bigint NOT NULL COMMENT '分类ID',
  `account_id` bigint COMMENT '账户ID',
  `record_date` date NOT NULL COMMENT '记账日期',
  `remark` varchar(500) COMMENT '备注',
  `images` text COMMENT '图片凭证（JSON数组）',
  `location` varchar(200) COMMENT '地点（可选）',
  `create_time` datetime COMMENT '创建时间',
  `update_time` datetime COMMENT '更新时间',
  `del_flag` char(1) DEFAULT '0' COMMENT '删除标志',
  PRIMARY KEY (`record_id`),
  KEY `idx_user_id` (`user_id`),
  KEY `idx_family_id` (`family_id`),
  KEY `idx_record_date` (`record_date`),
  KEY `idx_category_id` (`category_id`),
  KEY `idx_record_type` (`record_type`)
) COMMENT='账单记录表';
```

#### 3.1.5 分类表 (bill_category)
```sql
CREATE TABLE `bill_category` (
  `category_id` bigint NOT NULL AUTO_INCREMENT COMMENT '分类ID',
  `category_name` varchar(50) NOT NULL COMMENT '分类名称',
  `category_type` char(1) NOT NULL COMMENT '分类类型（0支出 1收入）',
  `parent_id` bigint DEFAULT 0 COMMENT '父分类ID（0为一级分类）',
  `icon` varchar(50) COMMENT '图标',
  `color` varchar(20) COMMENT '颜色',
  `sort_order` int DEFAULT 0 COMMENT '排序',
  `is_system` char(1) DEFAULT '0' COMMENT '是否系统分类（0否 1是）',
  `status` char(1) DEFAULT '0' COMMENT '状态（0正常 1停用）',
  `create_time` datetime COMMENT '创建时间',
  `update_time` datetime COMMENT '更新时间',
  `del_flag` char(1) DEFAULT '0' COMMENT '删除标志',
  PRIMARY KEY (`category_id`),
  KEY `idx_parent_id` (`parent_id`),
  KEY `idx_category_type` (`category_type`)
) COMMENT='账单分类表';
```

#### 3.1.6 账户表 (bill_account)
```sql
CREATE TABLE `bill_account` (
  `account_id` bigint NOT NULL AUTO_INCREMENT COMMENT '账户ID',
  `user_id` bigint NOT NULL COMMENT '用户ID',
  `account_name` varchar(50) NOT NULL COMMENT '账户名称',
  `account_type` char(1) NOT NULL COMMENT '账户类型（0现金 1微信 2支付宝 3银行卡 4信用卡 5其他）',
  `account_no` varchar(50) COMMENT '账号（银行卡后四位）',
  `balance` decimal(10,2) DEFAULT 0 COMMENT '余额',
  `credit_limit` decimal(10,2) COMMENT '信用额度（信用卡专用）',
  `icon` varchar(50) COMMENT '图标',
  `color` varchar(20) COMMENT '颜色',
  `sort_order` int DEFAULT 0 COMMENT '排序',
  `status` char(1) DEFAULT '0' COMMENT '状态（0正常 1停用）',
  `create_time` datetime COMMENT '创建时间',
  `update_time` datetime COMMENT '更新时间',
  `del_flag` char(1) DEFAULT '0' COMMENT '删除标志',
  PRIMARY KEY (`account_id`),
  KEY `idx_user_id` (`user_id`),
  KEY `idx_account_type` (`account_type`)
) COMMENT='账户表';
```

#### 3.1.7 预算表 (bill_budget)
```sql
CREATE TABLE `bill_budget` (
  `budget_id` bigint NOT NULL AUTO_INCREMENT COMMENT '预算ID',
  `user_id` bigint NOT NULL COMMENT '用户ID',
  `family_id` bigint NOT NULL COMMENT '家庭组ID',
  `budget_type` char(1) DEFAULT '0' COMMENT '预算类型（0月度 1年度）',
  `category_id` bigint COMMENT '分类ID（为空表示总预算）',
  `budget_amount` decimal(10,2) NOT NULL COMMENT '预算金额',
  `actual_amount` decimal(10,2) DEFAULT 0 COMMENT '实际支出',
  `budget_year` int COMMENT '预算年份',
  `budget_month` int COMMENT '预算月份',
  `status` char(1) DEFAULT '0' COMMENT '状态（0正常 1已完成 2已超支）',
  `create_time` datetime COMMENT '创建时间',
  `update_time` datetime COMMENT '更新时间',
  `del_flag` char(1) DEFAULT '0' COMMENT '删除标志',
  PRIMARY KEY (`budget_id`),
  KEY `idx_user_id` (`user_id`),
  KEY `idx_family_id` (`family_id`),
  KEY `idx_year_month` (`budget_year`, `budget_month`)
) COMMENT='预算表';
```

#### 3.1.8 提醒设置表 (bill_reminder)
```sql
CREATE TABLE `bill_reminder` (
  `reminder_id` bigint NOT NULL AUTO_INCREMENT COMMENT '提醒ID',
  `user_id` bigint NOT NULL COMMENT '用户ID',
  `reminder_type` char(1) NOT NULL COMMENT '提醒类型（0记账提醒 1账单提醒 2预算提醒）',
  `reminder_name` varchar(100) COMMENT '提醒名称',
  `reminder_time` time COMMENT '提醒时间',
  `reminder_day` int COMMENT '提醒日期（还款日等）',
  `repeat_type` char(1) DEFAULT '0' COMMENT '重复类型（0每天 1每周 2每月 3自定义）',
  `enabled` char(1) DEFAULT '1' COMMENT '是否启用',
  `create_time` datetime COMMENT '创建时间',
  `update_time` datetime COMMENT '更新时间',
  `del_flag` char(1) DEFAULT '0' COMMENT '删除标志',
  PRIMARY KEY (`reminder_id`),
  KEY `idx_user_id` (`user_id`)
) COMMENT='提醒设置表';
```

---

## 四、非功能性需求

### 4.1 性能要求
- **响应时间：** 页面加载时间 < 2秒
- **并发用户：** 支持1000+并发用户
- **数据准确性：** 金额计算精确到分

### 4.2 安全要求
- **数据加密：** 密码加密存储（BCrypt）
- **Token认证：** 基于Sa-Token的JWT认证
- **数据备份：** 每日自动备份数据库
- **权限控制：** 家庭组数据隔离

### 4.3 兼容性要求
- **APP端：** iOS 12+、Android 8.0+
- **浏览器：** Chrome、Safari、Edge最新版本
- **屏幕适配：** 支持主流手机屏幕尺寸

### 4.4 可用性要求
- **用户体验：** 简洁直观，操作流畅
- **离线支持：** 支持离线记账，联网后自动同步（可选）
- **数据同步：** 实时同步家庭成员数据

---

## 五、开发计划

### 5.1 开发阶段（共3个迭代）

#### 第一阶段：基础功能开发（2周）
**时间节点：** Week 1-2

**后端开发：**
- ✅ 数据库表设计与创建
- ✅ 用户管理模块（注册、登录、家庭组）
- ✅ 账单管理模块（CRUD）
- ✅ 分类管理模块
- ✅ 账户管理模块
- ✅ 基础API接口开发

**前端APP开发：**
- ✅ 登录/注册页面
- ✅ 首页概览页面
- ✅ 记账页面（快速记账）
- ✅ 账单列表页面
- ✅ 个人中心页面

**管理后台开发：**
- ✅ 用户管理界面
- ✅ 账单管理界面
- ✅ 分类管理界面

---

#### 第二阶段：统计分析与预算功能（2周）
**时间节点：** Week 3-4

**后端开发：**
- ✅ 统计分析API（收支趋势、分类统计）
- ✅ 预算管理模块
- ✅ 数据导出功能

**前端APP开发：**
- ✅ 统计分析页面（图表展示）
- ✅ 预算管理页面
- ✅ 账单查询页面（多条件筛选）
- ✅ 家庭组管理页面

**管理后台开发：**
- ✅ 数据统计界面
- ✅ 预算监控界面

---

#### 第三阶段：优化与扩展功能（1周）
**时间节点：** Week 5

**功能优化：**
- ✅ 提醒设置功能
- ✅ 图片上传与管理
- ✅ 数据备份与恢复
- ✅ 性能优化
- ✅ 界面美化

**可选功能：**
- 🔧 微信/支付宝登录
- 🔧 语音输入备注
- 🔧 AI智能分析（基于Spring AI Alibaba）
- 🔧 离线记账

**测试与部署：**
- ✅ 功能测试
- ✅ 性能测试
- ✅ 安全测试
- ✅ 部署上线

---

### 5.2 人员分工建议
- **后端开发：** 1人（您）
- **前端APP开发：** 1人或外包
- **管理后台：** 复用现有系统，少量定制
- **测试：** 您和您老婆共同参与

---

## 六、技术选型详细说明

### 6.1 后端技术栈
```yaml
核心框架:
  - Spring Boot: 3.3.6
  - MyBatis-Flex: 1.10.9
  - Sa-Token: 1.44.0

数据库:
  - MySQL: 8.0+
  - Redis: 6.0+

工具库:
  - Hutool: 5.8.38
  - Fastjson2: 2.0.56
  - Apache POI: 4.1.2（导出Excel）
```

### 6.2 前端APP技术栈（uniapp生态）
```yaml
核心框架:
  - uniapp: 最新版
  - Vue: 3.x（Composition API）
  - HBuilderX: 开发工具

UI框架:
  - uView UI: 2.0+（uniapp生态最流行的UI框架）
  - 或 uni-ui: 官方组件库（可选）

图表库:
  - uCharts: uniapp专用图表库（推荐）
  - 或 ECharts for uniapp: ECharts uniapp版本

状态管理:
  - Pinia: 2.x（Vue3官方推荐）
  - Vuex: 4.x（可选）

路由:
  - uni-app内置路由（pages.json配置）

HTTP请求:
  - uni.request（uniapp内置）
  - 封装axios风格的请求拦截器

工具库:
  - Day.js: 日期处理
  - Lodash: 工具函数

调试工具:
  - uni-app调试模式
  - 微信开发者工具（小程序调试）

发布平台:
  - 微信小程序
  - 支付宝小程序（可选）
  - H5（手机浏览器访问）
  - iOS APP（可选）
  - Android APP（可选）
```

### 6.3 管理后台技术栈
```yaml
复用现有 RuoYi-Magic 系统:
  - Vue + Element Plus
  - 只需新增记账模块的管理界面
```

---

## 七、接口设计示例

### 7.1 用户相关接口

#### 7.1.1 用户注册
```
POST /api/bill/user/register

Request:
{
  "phone": "13800138000",
  "password": "123456",
  "nickName": "张三",
  "verifyCode": "123456"
}

Response:
{
  "code": 200,
  "msg": "注册成功",
  "data": {
    "userId": 1,
    "token": "xxx"
  }
}
```

#### 7.1.2 用户登录
```
POST /api/bill/user/login

Request:
{
  "phone": "13800138000",
  "password": "123456"
}

Response:
{
  "code": 200,
  "msg": "登录成功",
  "data": {
    "userId": 1,
    "nickName": "张三",
    "avatar": "http://xxx.jpg",
    "familyId": 1001,
    "token": "xxx"
  }
}
```

### 7.2 账单相关接口

#### 7.2.1 创建账单
```
POST /api/bill/record/add

Request:
{
  "recordType": "0",
  "amount": 50.00,
  "categoryId": 1,
  "accountId": 1,
  "recordDate": "2025-12-14",
  "remark": "午餐",
  "images": ["http://xxx.jpg"]
}

Response:
{
  "code": 200,
  "msg": "记账成功",
  "data": {
    "recordId": 10001
  }
}
```

#### 7.2.2 账单列表查询
```
GET /api/bill/record/list

Request Params:
- page: 1
- pageSize: 20
- recordType: 0（可选，0支出 1收入）
- categoryId: 1（可选）
- startDate: 2025-12-01（可选）
- endDate: 2025-12-31（可选）

Response:
{
  "code": 200,
  "msg": "查询成功",
  "data": {
    "total": 100,
    "list": [
      {
        "recordId": 10001,
        "recordType": "0",
        "amount": 50.00,
        "categoryName": "餐饮",
        "categoryIcon": "🍔",
        "accountName": "微信",
        "recordDate": "2025-12-14",
        "remark": "午餐",
        "userName": "张三",
        "createTime": "2025-12-14 12:30:00"
      }
    ]
  }
}
```

### 7.3 统计相关接口

#### 7.3.1 首页概览
```
GET /api/bill/stat/overview

Request Params:
- date: 2025-12（可选，默认当月）

Response:
{
  "code": 200,
  "msg": "查询成功",
  "data": {
    "todayExpense": 150.00,
    "todayIncome": 0.00,
    "monthExpense": 5000.00,
    "monthIncome": 8000.00,
    "monthBalance": 3000.00,
    "yearExpense": 50000.00,
    "yearIncome": 80000.00,
    "totalAssets": 100000.00
  }
}
```

#### 7.3.2 分类统计
```
GET /api/bill/stat/category

Request Params:
- startDate: 2025-12-01
- endDate: 2025-12-31
- recordType: 0（0支出 1收入）

Response:
{
  "code": 200,
  "msg": "查询成功",
  "data": [
    {
      "categoryId": 1,
      "categoryName": "餐饮",
      "categoryIcon": "🍔",
      "amount": 2000.00,
      "percent": 40.00,
      "count": 60
    },
    {
      "categoryId": 2,
      "categoryName": "购物",
      "categoryIcon": "🛍️",
      "amount": 1500.00,
      "percent": 30.00,
      "count": 20
    }
  ]
}
```

---

## 八、UI设计建议

### 8.1 APP端设计风格
- **配色方案：** 
  - 主色调：#1989FA（蓝色）
  - 支出红色：#EE0A24
  - 收入绿色：#07C160
  - 背景色：#F7F8FA

- **设计原则：**
  - 简洁明了，突出核心功能
  - 大按钮，易点击
  - 图标化分类，一目了然
  - 数据可视化，直观展示

### 8.2 核心页面布局

#### 8.2.1 首页
```
┌─────────────────────────┐
│  🏠 首页   📊 统计   👤 我的│
├─────────────────────────┤
│                         │
│     本月收支概览        │
│   ┌─────────────────┐  │
│   │ 支出  5000.00  │  │
│   │ 收入  8000.00  │  │
│   │ 结余  3000.00  │  │
│   └─────────────────┘  │
│                         │
│     快速记账按钮        │
│   ┌─────────────────┐  │
│   │   [+] 记一笔    │  │
│   └─────────────────┘  │
│                         │
│     最近账单            │
│   ┌─────────────────┐  │
│   │ 🍔 午餐  -50.00 │  │
│   │ 12-14 12:30     │  │
│   └─────────────────┘  │
│                         │
└─────────────────────────┘
```

#### 8.2.2 记账页面
```
┌─────────────────────────┐
│  ← 返回      记账       │
├─────────────────────────┤
│                         │
│  [支出]  [收入]         │
│                         │
│  ┌─────────────────┐   │
│  │    ¥ 0.00      │   │
│  └─────────────────┘   │
│                         │
│  分类选择:              │
│  🍔 🛍️ 🏠 🚗 🎭 💊     │
│  📚 👨‍👩‍👧 💰 🎁 📱 🔧    │
│                         │
│  支付方式: [微信 ▼]     │
│  日期: [2025-12-14 ▼]  │
│  备注: [点击添加备注]   │
│                         │
│  [上传凭证]             │
│                         │
│  ┌─────────────────┐   │
│  │   确认记账      │   │
│  └─────────────────┘   │
│                         │
└─────────────────────────┘
```

---

## 九、数据安全与隐私保护

### 9.1 数据加密
- 密码使用BCrypt加密
- 敏感信息传输使用HTTPS
- Token使用JWT签名验证

### 9.2 权限控制
- 家庭组数据隔离（用户只能看到自己家庭组的数据）
- 角色权限控制（管理员/普通成员）
- API接口权限验证

### 9.3 数据备份
- 每日自动备份数据库
- 支持手动导出数据
- 数据恢复机制

---

## 十、后续扩展规划（V2.0+）

### 10.1 高级功能
1. **AI智能分析**
   - 基于Spring AI Alibaba
   - 消费习惯分析
   - 智能省钱建议
   - 异常消费提醒

2. **理财规划**
   - 储蓄目标设置
   - 投资收益跟踪
   - 财务健康评分

3. **账单识别**
   - OCR识别小票/发票
   - 自动生成账单

4. **多币种支持**
   - 外币记账
   - 汇率自动转换

5. **社交功能**
   - 记账排行榜
   - 省钱挑战
   - 经验分享

### 10.2 平台扩展
- 小程序版本（微信/支付宝）
- Web H5版本
- 桌面客户端（可选）

---

## 十一、验收标准

### 11.1 功能验收
- ✅ 所有核心功能正常运行
- ✅ 数据准确无误差
- ✅ 界面友好易用

### 11.2 性能验收
- ✅ 页面加载时间 < 2秒
- ✅ 接口响应时间 < 500ms
- ✅ 支持100+并发用户

### 11.3 安全验收
- ✅ 无SQL注入漏洞
- ✅ 无XSS攻击漏洞
- ✅ 数据传输加密

---

## 十二、项目风险与应对

### 12.1 技术风险
- **风险：** 前端APP开发经验不足
- **应对：** 采用成熟的Vant UI框架，参考官方文档和示例

### 12.2 进度风险
- **风险：** 开发周期较紧
- **应对：** 采用敏捷开发，优先实现核心功能，扩展功能可后续迭代

### 12.3 用户体验风险
- **风险：** 用户习惯不同
- **应对：** 与您老婆充分沟通，及时收集反馈，快速迭代优化

---

## 十三、总结

本需求文档基于您现有的RuoYi-Magic系统，规划了一个功能完善、易于使用的个人家庭记账小工具。开发周期预计5周，分3个阶段迭代开发，最终交付包含APP端和管理后台的完整解决方案。

### 核心优势：
✅ **复用现有系统**：基于RuoYi-Magic，减少开发成本  
✅ **技术栈成熟**：Spring Boot 3 + Vue3 + Vant，稳定可靠  
✅ **功能全面**：记账、统计、预算、提醒一应俱全  
✅ **易于扩展**：预留AI分析、OCR识别等扩展接口  
✅ **数据安全**：家庭组隔离，权限控制，数据加密

### 下一步行动：
1. ✅ 确认需求文档
2. 🔧 设计数据库表结构
3. 🔧 搭建前端APP框架
4. 🔧 开发后端API接口
5. 🔧 前后端联调测试
6. 🔧 部署上线

**期待您和您老婆的反馈，让我们一起打造一个好用的记账工具！** 💪
